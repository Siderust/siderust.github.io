---
import { icons } from 'lucide-static';

const { name, class: className = 'h-5 w-5', title } = Astro.props;

if (!name) {
  throw new Error('Icon component requires a name prop.');
}

const rawIcon = icons[name];
if (!rawIcon) {
  throw new Error(`Unknown icon: ${name}`);
}

const attributes = [
  `class="${className}"`,
  title ? `role="img" aria-label="${title}"` : 'aria-hidden="true" focusable="false"',
].join(' ');

let svg = rawIcon.replace('width="24" height="24"', 'width="100%" height="100%"');
svg = svg.replace('<svg', `<svg ${attributes}`);
if (title) {
  svg = svg.replace('>', `><title>${title}</title>`);
}
---

<span class="inline-flex" set:html={svg}></span>
